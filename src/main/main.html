<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <style>
    body, div, p, svg {
      margin: 0px;
      border: none;
      padding: 0px;
      height: auto;
      width: auto;
    }
    #wrapper {
      height: 100vh;
      display: grid;
      grid-template-columns: 100%;
      grid-template-rows: 80% 20%;
      overflow: auto;
    }
    svg {
      width: 100%;
      height: 100%;
    }
    #info {
      overflow: auto;
      white-space: nowrap;
    }
    #info p {
      padding: 8px;
    }

    line {
      stroke: #999
    }
    line.relation {
      stroke-dasharray: 4 2;
      stroke: #ccc
    }
  </style>

  <!-- Load d3.js -->
  <script src="https://d3js.org/d3.v4.js"></script>
</head>

<body>
  <div id="wrapper">
    <!-- Create a div where the graph will take place -->
    <div id="scope-graph-svg"></div>
    <div id="info"></div>

  </div>
  <script>

    // radius of nodes
    const radius = 10;
    
    // placement of the label along the length of the edge (0 to 1).
    // Measured from the _centers_ of the nodes
    const edgeLabelPlacement = .4;

    const width = d3.selectAll('#scope-graph-svg').node().clientWidth;
    const height = d3.selectAll('#scope-graph-svg').node().clientHeight;

    // append the svg object to the body of the page
    var svg = d3.select('#scope-graph-svg')
      .append('svg')
      .append('g')

    var info = d3.select('#info')
      .append('pre')
      .text('Click on a node to show its relations')

    function prettyprintATerm(aTerm) {
      switch (aTerm.type) {
        case 'String':
        case 'Int':
        case 'ScopeRef':
          return `"${aTerm.value}"`;
        case 'List':
          return `[${aTerm.value.map(prettyprintATerm).join(', ')}]`
        case 'Tuple':
          return `(${aTerm.value.map(prettyprintATerm).join(', ')})`
        case 'Constructor':
          return `${aTerm.value.name}(${aTerm.value.arguments.map(prettyprintATerm).join(', ')})`
        default:
          throw new Error(`Unknown ATerm type ${aTerm.type}`)
      }
    }

    function prettyPrintRelations(relations) {
      return relations
        .map(relation => `${relation.name}: ${relation.values.map(prettyprintATerm).join(`<br>${' '.repeat(relation.name.length + 2)}`)}`)
        .join('<br>')
    }

    svg.append('defs').append('marker')
      .attr('id', 'arrowhead')
      .attr('viewBox', '-0 -5 10 10')
      .attr('refX', 5 + radius)
      .attr('refY', 0)
      .attr('orient', 'auto')
      .attr('markerWidth', 13)
      .attr('markerHeight', 13)
      .attr('xoverflow', 'visible')
      .append('svg:path')
      .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
      .attr('fill', '#999')
      .style('stroke', 'none');


    function createGraph(data) {

      // Initialize the links
      var link = svg
        .selectAll('.link')
        .data(data.links)
        .enter()
        .append('g')
        .attr('class', 'link')

      var linkLine = link.append('line')
        .attr('marker-end', 'url(#arrowhead)')
        .attr('class', d => d.type)

      var linkLabel = link.append('text')
        .attr('text-anchor', 'middle')
        .attr('alignment-baseline', 'middle')
        .attr('class', 'edgelabel')
        .attr('font-size', 10)
        .attr('fill', '#555555')
        .text(d => d.label)

      // Initialize the nodes
      var node = svg
        .selectAll('.node')
        .data(data.nodes)
        .enter()
        .append('g')
        .attr('class', 'node')
        .on('click', d => info.html(`${d.label} â€” ${d.id}<br>${prettyPrintRelations(d.relations)}`))


      node.append('circle')
        .attr('cx', 0)
        .attr('cy', 0)
        .attr('r', radius)
        .style('stroke', '#69b3a2')
        .style('fill', '#ffffff')

      node.append('text')
        .attr('text-anchor', 'middle')
        .attr('alignment-baseline', 'middle')
        .attr('font-size', '12')
        .text(d => d.label)


      // Let's list the force we wanna apply on the network
      var simulation = d3.forceSimulation(data.nodes)
        .force('.link', d3.forceLink()
          .id(d => d.id)
          .distance(200)
          .strength(0.2)
          .links(data.links))
        .force('charge', d3.forceManyBody()
          .strength(-200)
          .distanceMin(20)
          .distanceMax(500))
        .force('center', d3.forceCenter(width / 2, height / 2))
        .on('end', ticked);

      // This function is run at each iteration of the force algorithm, updating the nodes position.
      function ticked() {
        linkLine
          .attr('x1', d => d.source.x)
          .attr('y1', d => d.source.y)
          .attr('x2', d => d.target.x)
          .attr('y2', d => d.target.y);

        linkLabel
          .attr('x', d => { const offset = edgeLabelPlacement + 0.02 * d.label.length; return d.source.x * (1 - offset) + d.target.x * offset } )
          .attr('y', d => { const offset = edgeLabelPlacement + 0.02 * d.label.length; return d.source.y * (1 - offset) + d.target.y * offset } )

        node
          .attr('transform', d => `translate(${d.x}, ${d.y})`)
      }

    }

    // Takes an Object describing an ATerm (has a type and a value)
    // returns an array of strings
    function extractATermScopes(aTerm) {
      switch (aTerm.type) {
        case 'String':
        case 'Int':
          return [];
        case 'ScopeRef':
          return [aTerm.value]
        case 'List':
        case 'Tuple':
          return aTerm.value.flatMap(extractATermScopes)
        case 'Constructor':
          return aTerm.value.arguments.flatMap(extractATermScopes)
        default:
          throw new Error(`Unknown ATerm type ${aTerm.type}`)
      }
    }

    function scopeToLabel(scope) {
      const matchResult = scope.id.match(/^#[^-]*-([^-]+)-[0-9]+$/);
      if (matchResult === null) {
        console.warn("scope id did not match regex: ", scope.id, scope)
        return scope.id;
      }
      let label = matchResult[1];
      if (label.match(/^s_data/)) {
        const dataName = scope.relations.find(rel => rel.name === 'context')
          ?.values.find(val => val.value[0].value === 'data_name_unqualified')
          ?.value[1].value.arguments[0].value;
        if (dataName) {
          const modifier = label.match(/^s_data_(([a-z]+)_)+/)[2];
          const id = label.match(/\d+$/)[0];
          label = `${dataName} (${modifier} - ${id})`
        }
      }
      return label;
    }

    function extractRelationLinks(scope) {
      return scope.relations.flatMap(
        relation => relation.values.flatMap(
          value => extractATermScopes(value).map(
            ref => ({ source: scope.id, target: ref, label: relation.name, type: 'relation' }))))
    }

    function keepLink(link) {
      const ignoredRelations = ['root', 'type_args', 'generic_params']
      return ignoredRelations.every(relation => link.label !== relation)
    }

    function keepNode(node) {
      // keep if it is not an 's_merged' or 's_mod' node, or if it is 's_merged' but has incoming edges
      return (node.label.match(/^s_merged/) === null || data.links.some(link => link.target === node.id)) && node.label.match(/^s_mod/) === null
    }

    function nodeExists(node) {
      const id = typeof node === 'string' ? node : node.id
      return data.nodes.some(other => other.id === id)
    }

    const data = {"nodes": [{"id": "#.-s_data_instance_938-113", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1068-125"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1099-130"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1068-125"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1099-130"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}]}, {"id": "#src/main/test.pie-s_data_def_501-68", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s3_799-114", "relations": [{"name": "val", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "resA3"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_48-12"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_773-87", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_1924-188", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_merged_464-51", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_523-61", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_738-98", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_711-95", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_871-102", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}]}]}, {"id": "#.-s_merged_449-52", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_mod_tree_2177-202", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "expression"}]}}]}]}]}, {"id": "#.-s_merged_688-74", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_data_def_100-19", "relations": [{"name": "generic_params", "values": [{"type": "List", "value": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_9-7"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1979-193"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "generic_param", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1979-193"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_9-7"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.GenericSub"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "GenericSub"}]}}]}]}]}, {"id": "#.-s_merged_1058-120", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_405-41", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_instantiated_838-97", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_data_def_442-58", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bak"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bak"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_merged_860-113", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_1979-193", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_merged_654-88", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_func_50-7", "relations": [{"name": "val", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "genericSub"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1164-141"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "generic2"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_329-45"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "generic1"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_938-113"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "value"}, {"type": "Constructor", "value": {"name": "IntType", "arguments": []}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_329-45", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_459-57"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_490-62"}]}}, {"type": "Constructor", "value": {"name": "IntType", "arguments": []}}]}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_459-57"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_490-62"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "IntType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_807-92", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_161-29", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_1893-183", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_1099-130", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_1164-141", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1475-160"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1893-183"}]}}]}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1475-160"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1893-183"}]}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "GenericSub"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.GenericSub"}]}}]}]}]}, {"id": "#src/main/test.pie-s_merged_672-90", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_instantiated_521-67", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_773-87"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_838-97"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_773-87"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_838-97"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}]}, {"id": "#src/main/test.pie-s_block_28-103", "relations": []}, {"id": "#-s_1-1", "relations": [{"name": "mod_wip", "values": [{"type": "Constructor", "value": {"name": "MODULE", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}, {"type": "List", "value": [{"type": "String", "value": "test"}, {"type": "String", "value": "expression"}]}]}}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_1465-155", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_common_instance_1557-167", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1068-125"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#.-s_data_instance_459-57", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bak"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bak"}]}}]}]}]}, {"id": "#.-s_data_instance_89-18", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_merged_257-34", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_1475-160", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bar"}]}}]}]}]}, {"id": "#src/main/test.pie-s_func_inner_14-3", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "func_return_type"}, {"type": "Constructor", "value": {"name": "ContextType", "arguments": [{"type": "Constructor", "value": {"name": "UnitType", "arguments": []}}]}}]}]}]}, {"id": "#src/main/test.pie-s_mod_2-81", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "expression"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "module_name_qualified"}, {"type": "Constructor", "value": {"name": "ContextModule", "arguments": [{"type": "Constructor", "value": {"name": "Module", "arguments": [{"type": "Constructor", "value": {"name": "ModuleList", "arguments": [{"type": "List", "value": [{"type": "String", "value": "test"}]}]}}, {"type": "String", "value": "expression"}]}}]}}]}]}, {"name": "func", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "main"}, {"type": "Tuple", "value": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_func_50-7"}, {"type": "Constructor", "value": {"name": "FuncDefType", "arguments": [{"type": "List", "value": []}, {"type": "List", "value": [{"type": "Constructor", "value": {"name": "IntType", "arguments": []}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_938-113"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_329-45"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1164-141"}]}}]}, {"type": "Constructor", "value": {"name": "UnitType", "arguments": []}}]}}]}]}]}, {"name": "data", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "GenericSub"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Generic"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bok"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_348-38"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Baar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_383-48"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bak"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_442-58"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_501-68"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Foo"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_560-76"}]}]}, {"name": "func_local", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "main"}, {"type": "Tuple", "value": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_func_50-7"}, {"type": "Constructor", "value": {"name": "FuncDefType", "arguments": [{"type": "List", "value": []}, {"type": "List", "value": [{"type": "Constructor", "value": {"name": "IntType", "arguments": []}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_938-113"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_329-45"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1164-141"}]}}]}, {"type": "Constructor", "value": {"name": "UnitType", "arguments": []}}]}}]}]}]}, {"name": "data_local", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "GenericSub"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bok"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_348-38"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bak"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_442-58"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_501-68"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Generic"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Foo"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_560-76"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Baar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_383-48"}]}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_data_def_383-48", "relations": [{"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_1068-125", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_1133-136", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}]}]}, {"id": "#.-s_data_instance_737-82", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_490-62", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_9-7", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bar"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_1609-172", "relations": [{"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_2106-198"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Bound", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_2106-198"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Bound", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#.-s_data_instance_907-108", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_merged_122-10", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_instantiated_1245-146", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1507-165"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1924-188"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1507-165"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1924-188"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#.-s_merged_1030-117", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_421-49", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_691-92", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_1437-152", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_636-86", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_instantiated_2106-198", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_merged_774-102", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_48-12", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_737-82"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_807-92"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_737-82"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_807-92"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}]}, {"id": "#.-s_data_instance_124-23", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_1507-165", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_merged_285-37", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_727-77", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_data_def_222-30", "relations": [{"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_871-102"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_161-29"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "TopType", "arguments": []}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "generic_param", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "TopType", "arguments": []}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_161-29"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_871-102"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_data_def_560-76", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_tree_root_615-84", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<ROOT>"}]}}]}]}]}, {"id": "#.-s_mod_tree_2175-206", "relations": [{"name": "mod", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "expression"}, {"type": "ScopeRef", "value": "#.-s_mod_tree_2177-202"}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "test"}]}}]}]}]}, {"id": "#.-s_tree_root_2173-209", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<ROOT>"}]}}]}]}, {"name": "mod", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "test"}, {"type": "ScopeRef", "value": "#.-s_mod_tree_2175-206"}]}]}]}, {"id": "#src/main/test.pie-s_data_def_348-38", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bok"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bok"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_empty_822-111", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<NONE>"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<NONE>"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}], "links": [{"source": "#.-s_data_instance_938-113", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#src/main/test.pie-s_data_def_501-68", "target": "#.-s_data_instance_1133-136", "label": "INHERIT"}, {"source": "#src/main/test.pie-s3_799-114", "target": "#src/main/test.pie-s_block_28-103", "label": "P"}, {"source": "#.-s_data_instance_instantiated_773-87", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1924-188", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#src/main/test.pie-s_merged_464-51", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_523-61", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_738-98", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_711-95", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_871-102", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_merged_449-52", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_mod_tree_2177-202", "target": "#src/main/test.pie-s_mod_2-81", "label": "FILE"}, {"source": "#.-s_merged_688-74", "target": "#src/main/test.pie-s3_799-114", "label": "P"}, {"source": "#src/main/test.pie-s_data_def_100-19", "target": "#.-s_data_instance_124-23", "label": "INHERIT"}, {"source": "#.-s_merged_1058-120", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_405-41", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_instantiated_838-97", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#src/main/test.pie-s_data_def_442-58", "target": "#.-s_data_instance_907-108", "label": "INHERIT"}, {"source": "#src/main/test.pie-s_merged_860-113", "target": "#src/main/test.pie-s3_799-114", "label": "P"}, {"source": "#.-s_data_instance_1979-193", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#src/main/test.pie-s_merged_654-88", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_func_50-7", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_329-45", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_807-92", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_161-29", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_1893-183", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_1099-130", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_1164-141", "target": "#src/main/test.pie-s_data_def_100-19", "label": "P"}, {"source": "#src/main/test.pie-s_merged_672-90", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_instantiated_521-67", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#src/main/test.pie-s_block_28-103", "target": "#src/main/test.pie-s_func_inner_14-3", "label": "P"}, {"source": "#-s_1-1", "target": "#.-s_tree_root_2173-209", "label": "MODULE_TREE_ROOT"}, {"source": "#.-s_merged_1465-155", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_common_instance_1557-167", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_459-57", "target": "#src/main/test.pie-s_data_def_442-58", "label": "P"}, {"source": "#.-s_data_instance_89-18", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_merged_257-34", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_1475-160", "target": "#src/main/test.pie-s_data_def_501-68", "label": "P"}, {"source": "#src/main/test.pie-s_func_inner_14-3", "target": "#src/main/test.pie-s_func_50-7", "label": "P"}, {"source": "#src/main/test.pie-s_mod_2-81", "target": "#-s_1-1", "label": "P"}, {"source": "#src/main/test.pie-s_mod_2-81", "target": "#src/main/test.pie-s_tree_root_615-84", "label": "MODULE_TREE_ROOT"}, {"source": "#src/main/test.pie-s_data_def_383-48", "target": "#.-s_data_instance_89-18", "label": "INHERIT"}, {"source": "#.-s_data_instance_1068-125", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_1133-136", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_737-82", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_490-62", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_9-7", "target": "#src/main/test.pie-s_data_def_501-68", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1609-172", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_907-108", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#src/main/test.pie-s_merged_122-10", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1245-146", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_merged_1030-117", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_421-49", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_691-92", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_1437-152", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_636-86", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_instantiated_2106-198", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#src/main/test.pie-s_merged_774-102", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_48-12", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_124-23", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1507-165", "target": "#src/main/test.pie-s_data_def_501-68", "label": "P"}, {"source": "#.-s_merged_285-37", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_727-77", "target": "#src/main/test.pie-s3_799-114", "label": "P"}]}

    data.links.forEach(link => link.type = 'edge')
    data.links = data.links.concat(data.nodes.flatMap(extractRelationLinks)).filter(keepLink)
    data.nodes = data.nodes.map(node => ({ ...node, label: scopeToLabel(node) })).filter(keepNode)
    data.links = data.links.filter(link => nodeExists(link.source) && nodeExists(link.target))
    createGraph(data);

/*
todo:
- Push to github
- Generate HTML with scope graph embedded instead of JSON that has to be copy pasted to HTML
- Implement dragging the graph.
- Switch info back to <p>, but preserve whitespace. See https://stackoverflow.com/questions/8994516/html-css-best-practice-for-preserving-white-space-on-certain-elements
- Automatically scale graph and force based on how big the graph gets
- enter data in field in HTML instead of in source code
- Some way to make sure labels do not overlap
- Draw edge labels over nodes
- Draw transparent background behind labels to improve readability (transparent background can be same color as graph background). See https://stackoverflow.com/questions/15500894/background-color-of-text-in-svg
- Better drawing of self-loops
- Highlight the node for which the relation data is shown (the 'selected node')
- Highlight edge and edge label on mouseover
- Some way to highlight all edges of a certain type (checkboxes in config panel on right, on click, on mouseover?)
- Highlight node and node label on mouseover
- Some way to highlight all edges of a certain type (checkboxes in config panel on right, on click, on mouseover?)
- Make individual nodes draggable to let user improve graph layout manually. See https://stackoverflow.com/questions/46577426/d3-force-directed-graph-drag-and-zoom-functions-not-working
- Show edges of a scope in info panel
- Replace scope ids with label names in relation data?
- Make scope ids/labels in info panel clickable
- Highlight scope in graph on mouseover of scope ids/labels in info panel
- Syntax highlighting for relation data? (can use <span>s)
- Search: textbox to search for a particular scope. search both label and id, highlight all scopes that match. Arrows to point towards off-screen matches?
- custom scope filtering
- custom edge/relation filtering (make filtered relations a more muted color in info panel)
- Exploration mode: select a node to begin. Shows only selected nodes and nodes connected to the selected nodes. Show when some connected nodes are hidden by scope filters (dashed node with the text "X connected nodes hidden"? Flash scope filter text box on click, show list of hidden scopes in info box. May not scale well when many scopes selected, although might work with shorted edge and a bit muted / transparent color).
- Some way to save a node to quickly return to it later. Click with middle mouse button to save, gets saved in list in config panel?
- Allow collapsing ATerms in info panel (collapsed by default?)
- custom labels: // this is gonna be way too complicated, skip for now
  Textarea for input
  Space-separated matchers each line. Use first line where all matchers match. If none match, use scope.id
  Matchers have a sort of JSON field access like syntax
  Matchers:
  + id matcher: `scope.id` matches the scope id
  + relation matcher: `scope.relations[data] = Foo(#1, _)` matches the first argument of constructor Foo in relation 'data'. If multiple match, a random one is chosen
  + edge matcher: `scope.edges[P]` matches all edges named `P`
  + string matcher: `"hello world"` matches if a string matches exactly
  + regex matcher: `/^[0-9]+-([a-z_]+)$/` returns first captured group, or full match if no groups
  Example:
  ```    
    scope.relations[context]._1 "data_name_unqualified" | scope.relations[context]._2. 
    scope.id.match(/^#[^-]*-([^-]+)-[0-9]+$/)  // uses a regex on 'scope.id'
  ```
- Keep graph up to date with actual file system. Provide option to either reload automatically or show a message bar that tells user that the graph is outdated.
  Webserver: start a server with a static address where it statically provides the generated JSON file (or better: keeps JSON file and scope graph file up to date with backing source).
*/


  </script>
</body>

</html>