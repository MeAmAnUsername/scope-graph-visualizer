<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <!-- Load d3.js -->
  <script src="https://d3js.org/d3.v4.js"></script>
</head>

<body>
  <!-- Create a div where the graph will take place -->
  <div id="scope-graph-svg"></div>

  <script>

    // set the dimensions and margins of the graph
    var margin = { top: 10, right: 30, bottom: 30, left: 40 },
      width = 1080 - margin.left - margin.right,  // width of svg
      height = 720 - margin.top - margin.bottom, // height of svg
      radius = 10,                               // radius
      edgeLabelPlacement = .4;                   // placement of the label along the length of the edge (0 to 1). Measured from the _centers_ of the nodes

    // append the svg object to the body of the page
    var svg = d3.select('#scope-graph-svg')
      .append('svg')
      .attr('width', width + margin.left + margin.right)
      .attr('height', height + margin.top + margin.bottom)
      .append('g')
      .attr('transform',
        `translate(${margin.left},${margin.top})`);

    svg.append('defs').append('marker')
      .attr('id', 'arrowhead')
      .attr('viewBox', '-0 -5 10 10')
      .attr('refX', 5 + radius)
      .attr('refY', 0)
      .attr('orient', 'auto')
      .attr('markerWidth', 13)
      .attr('markerHeight', 13)
      .attr('xoverflow', 'visible')
      .append('svg:path')
      .attr('d', 'M 0,-5 L 10 ,0 L 0,5')
      .attr('fill', '#999')
      .style('stroke', 'none');


    function createGraph(data) {

      // Initialize the links
      var link = svg
        .selectAll('.link')
        .data(data.links)
        .enter()
        .append('g')
        .attr('class', 'link')

      var linkLine = link.append('line')
        .attr('marker-end', 'url(#arrowhead)')
        .style('stroke', '#aaa')

      var linkLabel = link.append('text')
        .attr('text-anchor', 'middle')
        .attr('alignment-baseline', 'middle')
        .attr('class', 'edgelabel')
        .attr('font-size', 10)
        .attr('fill', '#555555')
        .text(d => d.label)

      // Initialize the nodes
      var node = svg
        .selectAll('.node')
        .data(data.nodes)
        .enter()
        .append('g')
        .attr('class', 'node')


      node.append('circle')
        .attr('cx', 0)
        .attr('cy', 0)
        .attr('r', radius)
        .style('stroke', '#69b3a2')
        .style('fill', '#ffffff')

      node.append('text')
        .attr('text-anchor', 'middle')
        .attr('alignment-baseline', 'middle')
        .attr('font-size', '12')
        .text(d => d.label)


      // Let's list the force we wanna apply on the network
      var simulation = d3.forceSimulation(data.nodes)
        .force('.link', d3.forceLink()
          .id(d => d.id)
          .distance(200)
          .strength(0.2)
          .links(data.links))
        .force('charge', d3.forceManyBody()
          .strength(-200)
          .distanceMin(20)
          .distanceMax(500))
        .force('center', d3.forceCenter(width / 2, height / 2))
        .on('end', ticked);

      // This function is run at each iteration of the force algorithm, updating the nodes position.
      function ticked() {
        linkLine
          .attr('x1', d => d.source.x)
          .attr('y1', d => d.source.y)
          .attr('x2', d => d.target.x)
          .attr('y2', d => d.target.y);

        linkLabel
          .attr('x', d => d.source.x * (1 - edgeLabelPlacement) + d.target.x * edgeLabelPlacement)
          .attr('y', d => d.source.y * (1 - edgeLabelPlacement) + d.target.y * edgeLabelPlacement)

        node
          .attr('transform', d => `translate(${d.x}, ${d.y})`)
      }

    }

    // Takes an Object describing an ATerm (has a type and a value)
    // returns an array of strings
    function extractATermScopes(aTerm) {
      switch (aTerm.type) {
        case 'String':
        case 'Int':
          return [];
        case 'ScopeRef':
          return [aTerm.value]
        case 'List':
        case 'Tuple':
          return aTerm.value.flatMap(extractATermScopes)
        case 'Constructor':
          return aTerm.value.arguments.flatMap(extractATermScopes)
        default:
          throw new Error(`Unknown ATerm type ${aTerm.type}`)
      }
    }

    function scopeToLabel(scope) {
      const matchResult = scope.id.match(/^#[^-]*-([^-]+)-[0-9]+$/);
      if (matchResult === null) {
        console.warn("scope id did not match regex: ", scope.id, scope)
        return scope.id;
      }
      return matchResult[1];
    }

    function extractRelationLinks(scope) {
      return scope.relations.flatMap(
        relation => relation.values.flatMap(
          value => extractATermScopes(value).map(
            ref => ({ source: scope.id, target: ref, label: relation.name }))))
    }

    function keepLink(link) {
      const ignoredRelations = ['root']
      return ignoredRelations.every(relation => link.label !== relation)
    }

    function keepNode(node) {
      // keep if it is not an 's_merged' node, or if it has incoming edges
      return node.label.match(/^s_merged/) === null || data.links.some(link => link.target === node.id)
    }

    function nodeExists(node) {
      const id = typeof node === 'string' ? node : node.id
      return data.nodes.some(other => other.id === id)
    }

    const data = {"nodes": [{"id": "#src/main/test.pie-s_data_def_501-68", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bar"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s3_799-114", "relations": [{"name": "val", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "resA3"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_286-46"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_1306-142", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1413-150"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1379-146"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1413-150"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1379-146"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#.-s_merged_708-81", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_475-57", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_464-51", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_234-38", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}]}, {"id": "#src/main/test.pie-s_merged_523-61", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_738-98", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_711-95", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_524-64", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_1154-126", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_1063-119", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_130-24", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_923-108"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_949-112"}]}}, {"type": "Constructor", "value": {"name": "IntType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_923-108"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_949-112"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "IntType", "arguments": []}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}]}, {"id": "#.-s_data_instance_157-28", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}]}, {"id": "#.-s_data_instance_260-42", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_1218-137", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_data_def_100-19", "relations": [{"name": "generic_params", "values": [{"type": "List", "value": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_43-10"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_260-42"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "generic_param", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_260-42"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_43-10"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.GenericSub"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "GenericSub"}]}}]}]}]}, {"id": "#src/main/test.pie-s_merged_405-41", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_949-112", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}]}, {"id": "#.-s_merged_736-84", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_1035-116", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_1087-123", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1192-133"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1218-137"}]}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1192-133"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1218-137"}]}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.GenericSub"}]}}]}]}]}, {"id": "#src/main/test.pie-s_data_def_442-58", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bak"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bak"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_merged_860-113", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_common_instance_1544-155", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_746-88"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#.-s_data_instance_98-18", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_merged_654-88", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_func_50-7", "relations": [{"name": "val", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "genericSub"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1087-123"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "generic2"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_130-24"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "generic1"}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_187-32"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "value"}, {"type": "Constructor", "value": {"name": "IntType", "arguments": []}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_584-72", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_1413-150", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_610-76", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}]}, {"id": "#src/main/test.pie-s_merged_672-90", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_instantiated_1596-159", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1959-169"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Bound", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_1959-169"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Bound", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#.-s_data_instance_286-46", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_524-64"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_584-72"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_524-64"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_584-72"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}]}, {"id": "#.-s_merged_913-104", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_block_28-103", "relations": []}, {"id": "#-s_1-1", "relations": [{"name": "mod_wip", "values": [{"type": "Constructor", "value": {"name": "MODULE", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}, {"type": "List", "value": [{"type": "String", "value": "test"}, {"type": "String", "value": "expression"}]}]}}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_799-97", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_772-92", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_instantiated_1379-146", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_instantiated_313-50", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_555-68"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_610-76"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_555-68"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "UpperBoundType", "arguments": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_instantiated_610-76"}]}}]}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "WildcardType", "arguments": [{"type": "Constructor", "value": {"name": "NoUpperBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "NoLowerBoundType", "arguments": []}}, {"type": "Constructor", "value": {"name": "Free", "arguments": []}}]}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}]}, {"id": "#.-s_data_instance_1192-133", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}]}]}, {"id": "#src/main/test.pie-s_func_inner_14-3", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "func_return_type"}, {"type": "Constructor", "value": {"name": "ContextType", "arguments": [{"type": "Constructor", "value": {"name": "UnitType", "arguments": []}}]}}]}]}]}, {"id": "#src/main/test.pie-s_mod_2-81", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "expression"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "module_name_qualified"}, {"type": "Constructor", "value": {"name": "ContextModule", "arguments": [{"type": "Constructor", "value": {"name": "Module", "arguments": [{"type": "Constructor", "value": {"name": "ModuleList", "arguments": [{"type": "List", "value": [{"type": "String", "value": "test"}]}]}}, {"type": "String", "value": "expression"}]}}]}}]}]}, {"name": "func", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "main"}, {"type": "Tuple", "value": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_func_50-7"}, {"type": "Constructor", "value": {"name": "FuncDefType", "arguments": [{"type": "List", "value": []}, {"type": "List", "value": [{"type": "Constructor", "value": {"name": "IntType", "arguments": []}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_187-32"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_130-24"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1087-123"}]}}]}, {"type": "Constructor", "value": {"name": "UnitType", "arguments": []}}]}}]}]}]}, {"name": "data", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "Foo"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_560-76"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Baar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_383-48"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bok"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_348-38"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_501-68"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Generic"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "GenericSub"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bak"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_442-58"}]}]}, {"name": "func_local", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "main"}, {"type": "Tuple", "value": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_func_50-7"}, {"type": "Constructor", "value": {"name": "FuncDefType", "arguments": [{"type": "List", "value": []}, {"type": "List", "value": [{"type": "Constructor", "value": {"name": "IntType", "arguments": []}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_187-32"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_130-24"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_1087-123"}]}}]}, {"type": "Constructor", "value": {"name": "UnitType", "arguments": []}}]}}]}]}]}, {"name": "data_local", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "Bak"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_442-58"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Generic"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Baar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_383-48"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bok"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_348-38"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Bar"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_501-68"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "Foo"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_560-76"}]}, {"type": "Tuple", "value": [{"type": "String", "value": "GenericSub"}, {"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}]}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#.-s_data_instance_923-108", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bak"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_555-68", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}]}, {"id": "#src/main/test.pie-s_data_def_383-48", "relations": [{"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Baar"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Baar"}]}}]}]}]}, {"id": "#.-s_data_instance_instantiated_1959-169", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}]}, {"id": "#.-s_data_instance_9-6", "relations": [{"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}]}, {"id": "#.-s_data_instance_187-32", "relations": [{"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_746-88"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_772-92"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_746-88"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_772-92"}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}]}, {"id": "#.-s_data_instance_43-10", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bar"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}]}, {"id": "#.-s_data_instance_746-88", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_122-10", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_mod_tree_2025-174", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "expression"}]}}]}]}]}, {"id": "#src/main/test.pie-s_merged_691-92", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#src/main/test.pie-s_merged_636-86", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_data_instance_71-14", "relations": [{"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}, {"name": "type_args", "values": [{"type": "List", "value": [{"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "generic_arg", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "T"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "GenericParameter2TYPE", "arguments": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_100-19"}, {"type": "String", "value": "U"}]}}]}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "StrType", "arguments": []}}]}]}]}, {"id": "#src/main/test.pie-s_merged_774-102", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_1182-129", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_514-60", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_merged_885-101", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}]}, {"id": "#.-s_mod_tree_2023-178", "relations": [{"name": "mod", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "expression"}, {"type": "ScopeRef", "value": "#.-s_mod_tree_2025-174"}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "test"}]}}]}]}]}, {"id": "#src/main/test.pie-s_data_def_222-30", "relations": [{"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Generic"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Generic"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_98-18"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_234-38"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Constructor", "value": {"name": "TopType", "arguments": []}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "generic_param", "values": [{"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "V"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "TopType", "arguments": []}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "U"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_234-38"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "GenericParameter", "arguments": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_data_def_222-30"}, {"type": "String", "value": "T"}]}}, {"type": "Tuple", "value": [{"type": "Constructor", "value": {"name": "DataType", "arguments": [{"type": "ScopeRef", "value": "#.-s_data_instance_98-18"}]}}, {"type": "Constructor", "value": {"name": "BottomType", "arguments": []}}]}]}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}]}, {"id": "#src/main/test.pie-s_data_def_560-76", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Foo"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Foo"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_tree_root_615-84", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<ROOT>"}]}}]}]}]}, {"id": "#.-s_tree_root_2021-181", "relations": [{"name": "mod", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "test"}, {"type": "ScopeRef", "value": "#.-s_mod_tree_2023-178"}]}]}, {"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<ROOT>"}]}}]}]}]}, {"id": "#src/main/test.pie-s_data_def_348-38", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "Bok"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "foreign_java_impl"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "org.example.test.expression.Bok"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}, {"id": "#src/main/test.pie-s_empty_822-111", "relations": [{"name": "root", "values": [{"type": "ScopeRef", "value": "#-s_1-1"}]}, {"name": "context", "values": [{"type": "Tuple", "value": [{"type": "String", "value": "module_name_simple"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<NONE>"}]}}]}, {"type": "Tuple", "value": [{"type": "String", "value": "data_name_unqualified"}, {"type": "Constructor", "value": {"name": "ContextName", "arguments": [{"type": "String", "value": "<NONE>"}]}}]}]}, {"name": "generic_params", "values": [{"type": "List", "value": []}]}, {"name": "type_args", "values": [{"type": "List", "value": []}]}, {"name": "data_mods", "values": [{"type": "List", "value": []}]}, {"name": "file", "values": [{"type": "ScopeRef", "value": "#src/main/test.pie-s_mod_2-81"}]}]}], "links": [{"source": "#src/main/test.pie-s_data_def_501-68", "target": "#.-s_data_instance_799-97", "label": "INHERIT"}, {"source": "#src/main/test.pie-s3_799-114", "target": "#src/main/test.pie-s_block_28-103", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1306-142", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_merged_708-81", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_475-57", "target": "#src/main/test.pie-s3_799-114", "label": "P"}, {"source": "#src/main/test.pie-s_merged_464-51", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_234-38", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#src/main/test.pie-s_merged_523-61", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_738-98", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_711-95", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_524-64", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_merged_1154-126", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_1063-119", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_130-24", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_157-28", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_260-42", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_1218-137", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#src/main/test.pie-s_data_def_100-19", "target": "#.-s_data_instance_71-14", "label": "INHERIT"}, {"source": "#src/main/test.pie-s_merged_405-41", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_949-112", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_merged_736-84", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_1035-116", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_1087-123", "target": "#src/main/test.pie-s_data_def_100-19", "label": "P"}, {"source": "#src/main/test.pie-s_data_def_442-58", "target": "#.-s_data_instance_9-6", "label": "INHERIT"}, {"source": "#src/main/test.pie-s_merged_860-113", "target": "#src/main/test.pie-s3_799-114", "label": "P"}, {"source": "#.-s_common_instance_1544-155", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_98-18", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#src/main/test.pie-s_merged_654-88", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_func_50-7", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_584-72", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1413-150", "target": "#src/main/test.pie-s_data_def_501-68", "label": "P"}, {"source": "#.-s_data_instance_instantiated_610-76", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#src/main/test.pie-s_merged_672-90", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1596-159", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_286-46", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_merged_913-104", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_block_28-103", "target": "#src/main/test.pie-s_func_inner_14-3", "label": "P"}, {"source": "#-s_1-1", "target": "#.-s_tree_root_2021-181", "label": "MODULE_TREE_ROOT"}, {"source": "#.-s_data_instance_799-97", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_772-92", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_instantiated_1379-146", "target": "#src/main/test.pie-s_data_def_383-48", "label": "P"}, {"source": "#.-s_data_instance_instantiated_313-50", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_1192-133", "target": "#src/main/test.pie-s_data_def_501-68", "label": "P"}, {"source": "#src/main/test.pie-s_func_inner_14-3", "target": "#src/main/test.pie-s_func_50-7", "label": "P"}, {"source": "#src/main/test.pie-s_mod_2-81", "target": "#-s_1-1", "label": "P"}, {"source": "#src/main/test.pie-s_mod_2-81", "target": "#src/main/test.pie-s_tree_root_615-84", "label": "MODULE_TREE_ROOT"}, {"source": "#.-s_data_instance_923-108", "target": "#src/main/test.pie-s_data_def_442-58", "label": "P"}, {"source": "#.-s_data_instance_instantiated_555-68", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#src/main/test.pie-s_data_def_383-48", "target": "#.-s_data_instance_157-28", "label": "INHERIT"}, {"source": "#.-s_data_instance_instantiated_1959-169", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_9-6", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#.-s_data_instance_187-32", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#.-s_data_instance_43-10", "target": "#src/main/test.pie-s_data_def_501-68", "label": "P"}, {"source": "#.-s_data_instance_746-88", "target": "#src/main/test.pie-s_data_def_560-76", "label": "P"}, {"source": "#src/main/test.pie-s_merged_122-10", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_mod_tree_2025-174", "target": "#src/main/test.pie-s_mod_2-81", "label": "FILE"}, {"source": "#src/main/test.pie-s_merged_691-92", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#src/main/test.pie-s_merged_636-86", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_data_instance_71-14", "target": "#src/main/test.pie-s_data_def_222-30", "label": "P"}, {"source": "#src/main/test.pie-s_merged_774-102", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_1182-129", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}, {"source": "#.-s_merged_514-60", "target": "#src/main/test.pie-s3_799-114", "label": "P"}, {"source": "#.-s_merged_885-101", "target": "#src/main/test.pie-s_mod_2-81", "label": "P"}]}

    data.links.forEach(link => link.type = 'edge')
    data.links = data.links.concat(data.nodes.flatMap(extractRelationLinks)).filter(keepLink)
    data.nodes = data.nodes.map(node => ({ ...node, label: scopeToLabel(node) })).filter(keepNode)
    data.links = data.links.filter(link => nodeExists(link.source) && nodeExists(link.target))
    createGraph(data);

/*
todo:
- Give relation edges a different style (dashed, slightly lighter?)
- automatically scale graph and force based on how big the graph gets
- Alternative / extra: implement dragging the graph. May be better and easier.
- Click on node to show relations data
- enter data in field in HTML instead of in source code
- Some way to make sure labels do not overlap
- Draw edge labels over nodes
- custom labels: // this is gonna be way too complicated, skip for now
  Textarea for input
  Space-separated matchers each line. Use first line where all matchers match. If none match, use scope.id
  Matchers have a sort of JSON field access like syntax
  Matchers:
  + id matcher: `scope.id` matches the scope id
  + relation matcher: `scope.relations[data] = Foo(#1, _)` matches the first argument of constructor Foo in relation 'data'. If multiple match, a random one is chosen
  + edge matcher: `scope.edges[P]` matches all edges named `P`
  + string matcher: `"hello world"` matches if a string matches exactly
  + regex matcher: `/^[0-9]+-([a-z_]+)$/` returns first captured group, or full match if no groups
  Example:
  ```    
    scope.relations[context]._1 "data_name_unqualified" | scope.relations[context]._2. 
    scope.id.match(/^#[^-]*-([^-]+)-[0-9]+$/)  // uses a regex on 'scope.id'
  ```
*/


  </script>
</body>

</html>